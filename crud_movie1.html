<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
</head>
<body>
  <div class="container">
    <div id="all"></div>
  </div>

  <script>
    let movie = [];
    const container = document.getElementById('all');

    const allHolder = document.createElement('div');
    allHolder.className = 'mt-5 col-lg-5 col-md-5';

    const Mname = document.createElement('h4');
    Mname.innerHTML = 'Movie Name';

    const Minput = document.createElement('input');
    Minput.className = 'form-control p-2';
    Minput.placeholder = 'Enter Movie Name';

    const urlname = document.createElement('h4');
    urlname.innerHTML = 'Image URL';

    const urlinput = document.createElement('input');
    urlinput.placeholder = 'Enter Image URL';
    urlinput.className = 'form-control py-2';

    const button = document.createElement('button');
    button.innerHTML = 'ADD';
    button.className = 'btn btn-dark py-2 mt-3';

    // This div will hold the cards
    const bllHolder = document.createElement('div');
    bllHolder.className = 'row mt-5';
    container.appendChild(bllHolder);

    // Handle adding movie
    button.onclick = () => {
      const datasaver = {
        moviename: Minput.value,
        moveieurl: urlinput.value
      };
      movie.push(datasaver);
      Minput.value = '';
      urlinput.value = '';
      render();
    };

    // Add form to page
    allHolder.append(Mname, Minput, urlname, urlinput, button);
    container.prepend(allHolder); // put form at top

    function render() {
      bllHolder.innerHTML = ''; // clear old cards

      movie.forEach((element, index) => {
        const cardcol = document.createElement('div');
        cardcol.className = 'col-lg-3 col-md-4 col-sm-6 d-flex mt-3';

        const card = document.createElement('div');
        card.className = 'card w-100';

        const image = document.createElement('img');
        image.src = element.moveieurl;
        image.className = 'card-img-top';
        image.style.height = '10rem';
        image.style.objectFit = 'cover';

        const title = document.createElement('h5');
        title.innerHTML = element.moviename;
        title.className = 'card-title text-center mt-2';

        const buttonholder = document.createElement('div');
        buttonholder.className = 'd-flex justify-content-center gap-2 pb-3';

        const delButton = document.createElement('button');
        delButton.className = 'btn btn-danger';
        delButton.innerHTML = 'Delete';
        delButton.onclick = () => {
          movie.splice(index, 1); // remove this movie
          render(); // re-render
        };

        const editButton = document.createElement('button');
        editButton.className = 'btn btn-primary';
        editButton.innerHTML = 'Update';
        editButton.onclick = () =>{
          card.innerHTML = '';

          const newholder = document.createElement('div');
          newholder.className = '';

          const editname = document.createElement('input');
          editname.className = 'form-control p-2 mt-3';
          editname.placeholder = 'Type New Movie Name';

          const editurl = document.createElement('input');
          editurl.className = 'form-control p-2 mt-3';
          editurl.placeholder = 'Type New URL';

          const doneButton = document.createElement('button');
          doneButton.className = 'btn btn-success p-2 mt-3';
          doneButton.innerHTML = 'Done';
          doneButton.onclick = () =>{
          movie[index].moviename = editname.value;
          movie[index].moveieurl = editurl.value;

            render();
          }


          newholder.append(editname,editurl,doneButton);
          card.append(newholder)


        }

        buttonholder.append(delButton, editButton);
        card.append(image, title, buttonholder);
        cardcol.append(card);
        bllHolder.append(cardcol);
      });
    }
  </script>
</body>
</html>
